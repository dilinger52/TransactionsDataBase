<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="main.css" rel="stylesheet">
    <script src="main.js"></script>
    <title>Главная</title>
</head>
<body>
<div class="header" id="header">
    <div>
<h2 class="inline">Главная</h2><th:block th:insert="userBlock.html :: user_block"></th:block>

<div>
<form method="get" action="client" class="inline">
    <input type="submit" value="Сбросить фильтры">
</form>
<form method="get" action="new_client" class="inline">
    <input type="submit" value="Добавить клиента">
</form>
    <form method="get" action="new_currency" class="inline">
        <input type="submit" value="Добавить валюту">
    </form>
<form method="get" action="add_transaction" class="inline">
    <input type="submit" value="Новая транзакция">
</form>
        <form method="post" action="download/all" class="inline">
            <input type="submit" value="Скачать таблицу">
        </form>
        <form method="get" action="excel" class="inline">
            <input type="submit" value="Загрузить таблицу">
        </form>

</div>
    </div>
<div>
<form method="get" action="client" class="inline">
    <div class="inline">
    <label for="client_name">Поиск по ФИО</label>
    <input type="text" list="client_name_datalist" id="client_name" name="client_name" placeholder="Поиск.." onkeyup="filterFunction()" autocomplete="off">
    <datalist id="client_name_datalist">
        <option th:each="client : ${session.clients}" th:if="${client.client.pib != 'Всего'}" th:value="${client.client.pib}"></option>
    </datalist>
    </div>
    <div class="inline">
    <label for="client_phone">Поиск по телефону</label>
    <input type="text" list="client_phone_datalist" id="client_phone" name="client_phone" placeholder="Поиск.." onkeyup="filterFunction()" autocomplete="off">
    <datalist id="client_phone_datalist">
        <option th:each="client : ${session.clients}" th:if="${client.client.pib != 'Всего'}" th:value="${client.client.phone}"></option>
    </datalist>
    </div>
    <div class="inline">
    <label for="client_telegram">Поиск по Telegram</label>
    <input type="text" list="client_telegram_datalist" id="client_telegram" name="client_telegram" placeholder="Поиск.." onkeyup="filterFunction()" autocomplete="off">
    <datalist id="client_telegram_datalist">
        <option th:each="client : ${session.clients}" th:if="${client.client.pib != 'Всего'}" th:value="${client.client.telegram}"></option>
    </datalist>
    </div>
    <input type="submit" value="Поиск" class="inline">
</form>
</div>
</div>
    <table class="under-header-main" id="capture">
        <thead class="main" name="thead">
        <tr>
            <th>ФИО</th>
            <th>Номер телефона</th>
            <th>Telegram</th>
            <th th:each="currency : ${session.currencies}" th:if="${currency.name != 'RUB'}" th:text="${currency.name}"></th>
            <th>Детали</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="client : ${session.clients}">
            <th th:text="${client.client.pib}"></th>
            <th th:text="${client.client.phone}"></th>
            <th th:text="${client.client.telegram}"></th>
            <th:block th:each="currency : ${client.currencies}" th:if="${currency.key.name != 'RUB'}" >
                <th th:text="${#numbers.formatInteger(currency.value, 1, 'WHITESPACE')}"></th>
            </th:block>
            <th th:if="${client.client.pib != 'Всего'}">
                <form method="get" action="client_info">
                    <input type="hidden" name="client_id" th:value="${client.client.id}">
                    <input type="submit" value="посмотреть">
                </form>
            </th>
            <th th:if="${client.client.pib == 'Всего'}"></th>
        </tr>
        </tbody>
    </table>


</body>
